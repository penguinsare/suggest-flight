(this.webpackJsonpflights=this.webpackJsonpflights||[]).push([[0],{101:function(e,t,n){e.exports=n(196)},106:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),c=n.n(o),l=(n(106),n(14)),i=n(211),u=n(7),s=n(214),m=n(52),d=n(92),f=n.n(d),p=n(203),g=n(209),b=n(213),h=n(204);var v=function(){return r.a.createElement(p.a,null,r.a.createElement(s.a,{status:"info"},r.a.createElement(s.b,null),"Covid flight search will search for your flight and in addition will provide you with alternative flights to your destinations' neighbouring countries that have fewer Covid cases per one million population."),r.a.createElement(s.a,{status:"warning"},r.a.createElement(s.b,null),"Disclaimer - Covid flight search is a portfolio project showcasing programming skills and should not be used for real trip planning or evaluating the covid situation in different countries.",r.a.createElement(g.a,{usePortal:!0},r.a.createElement(g.e,null,r.a.createElement(b.a,{minWidth:"5em",bg:"info.600"},"APIs used")),r.a.createElement(g.c,{zIndex:"4"},r.a.createElement(g.b,null,r.a.createElement(g.d,null,"The APIs used in this project are:"),r.a.createElement(g.b,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{href:"https://rapidapi.com/skyscanner/api/skyscanner-flight-search?endpoint=5aa1eab3e4b00687d3574279"},"Skyscanner Flight Search API at RapidApi"),r.a.createElement(h.a,{href:"https://rapidapi.com/api-sports/api/covid-193"},"Covid Stats API at RapidAPi"))))))))},E=n(18),O=n.n(E),C=n(32),y=n(205),j=n(206),x=n(208),I=n(96),S=n(40),w=n(210),k=n(97),P=n.n(k).a.create({baseURL:"http://flights.polytech-software.com"}),D=function(){var e=Object(C.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P.get("/places?query=".concat(t)),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var q=function(e){var t=e.setLocation,n=e.placeholder,o=Object(a.useState)(""),c=Object(l.a)(o,2),i=c[0],s=c[1],m=Object(a.useState)([]),d=Object(l.a)(m,2),f=d[0],p=d[1],b=Object(a.useState)([]),h=Object(l.a)(b,2),v=h[0],E=h[1],y=Object(a.useState)(!1),j=Object(l.a)(y,2),x=j[0],I=j[1],S=Object(a.useRef)(null);return Object(a.useEffect)((function(){E(f.filter((function(e){return"-sky"!==e.CityId})))}),[f]),r.a.createElement(g.a,{initialFocusRef:S,isOpen:x,onOpen:function(){return I(!0)},onClose:function(){return I(!1)},closeOnBlur:!0,closeOnEsc:!0},r.a.createElement(g.e,null,r.a.createElement(w.a,{mr:"3px",w:"auto",placeholder:n,value:i,onChange:function(e){e.preventDefault(),x?S.current.focus():I(!0)}})),r.a.createElement(g.c,{zIndex:4},r.a.createElement(g.d,null,"Destinations:"),r.a.createElement(g.b,null,r.a.createElement(w.a,{ref:S,w:"auto",mr:"3px",marginBottom:"0.5em",placeholder:n,value:i,onChange:function(e){e.preventDefault(),2===e.target.value.length?Object(C.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e.target.value);case 3:n=t.sent,p(n.data.Places),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))():e.target.value.length>2&&E(f.filter((function(t){return t.PlaceName.toUpperCase().includes(e.target.value.toUpperCase())&&"-sky"!==t.CityId}))),s(e.target.value)}}),(null===v||void 0===v?void 0:v.length)>0&&v.map((function(e,n){return r.a.createElement(u.a,{p:"0.5em",key:e.PlaceId,onClick:function(){t(e),s(e.PlaceName),I(!1)},onMouseEnter:function(e){return e.target.style.backgroundColor="lightgray"},onMouseLeave:function(e){return e.target.style.backgroundColor="white"}},e.PlaceName,", ",e.CountryName)})))))},L=n(71),N=n.n(L);n(134);function W(e){return A.apply(this,arguments)}function A(){return(A=Object(C.a)(O.a.mark((function e(t){var n,a,r,o,c,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.origin,a=t.destination,r=t.destinationCountryCode,o=t.startDate,c=t.returnDate,l=P.get("/browseroutes/".concat(n,"/").concat(a,"/").concat(r,"/").concat(o,"/").concat(c)),e.abrupt("return",l);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){var t=e.children;return r.a.createElement(u.a,{p:"3",d:"flex",justifyContent:"center",alignItems:"center",flexDirection:["column","column","row","row"]},t)}var R=function(e){var t=e.setQuotes,n=Object(a.useState)(null),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(null),m=Object(l.a)(s,2),d=m[0],f=m[1],g=Object(a.useState)(new Date),h=Object(l.a)(g,2),v=h[0],E=h[1],w=Object(a.useState)(new Date),k=Object(l.a)(w,2),P=k[0],D=k[1],L=Object(a.useState)(!0),A=Object(l.a)(L,2),R=A[0],z=A[1],F=Object(a.useState)(!1),B=Object(l.a)(F,2),M=B[0],T=B[1],U=Object(a.forwardRef)((function(e,t){var n=e.value,a=e.onClick;return r.a.createElement(b.a,{onClick:a,mr:"3px",ref:t},n)}));return Object(a.useEffect)((function(){console.log("Origin",c),console.log("Destination",d)}),[c,d]),Object(a.useEffect)((function(){console.log("Origin",c),console.log("Destination",d)}),[c,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{mt:8},r.a.createElement(y.a,{fontSize:"24px",justifyContent:"center",d:"flex"},"Search Flight"),r.a.createElement(u.a,{borderWidth:"1px",rounded:"4px",shadow:"md"},r.a.createElement(Q,null,r.a.createElement(j.a,{defaultValue:"2",spacing:5,isInline:!0,onChange:function(e){return"2"===e.target.value?z(!0):z(!1)}},r.a.createElement(x.a,{variantColor:"primary",value:"1"},"One Way"),r.a.createElement(x.a,{variantColor:"primary",value:"2"},"Round Trip"))),r.a.createElement(Q,null,r.a.createElement(q,{setLocation:function(e){return i(e)},placeholder:"Where from"}),r.a.createElement(q,{setLocation:function(e){return f(e)},placeholder:"Where to"}),r.a.createElement(N.a,{selected:v,onChange:function(e){return E(e)},customInput:r.a.createElement(U,null)}),r.a.createElement(N.a,{disabled:!R,selected:P,onChange:function(e){return D(e)},customInput:r.a.createElement(U,null)}),r.a.createElement(b.a,{variantColor:"primary",minWidth:"5em",onClick:function(){Object(C.a)(O.a.mark((function e(){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(!0),!c||!d){e.next=28;break}if(console.log("origin",c),console.log("destination",d),console.log("startDate",v.toISOString().slice(0,10)),console.log("returnDate",P.toISOString().slice(0,10)),console.log("call quotes ".concat(c.PlaceId,"/").concat(d.PlaceId,"/").concat(null===c||void 0===c?void 0:c.CountryId,"/").concat(v.toISOString().slice(0,10),"/").concat(P.toISOString().slice(0,10))),e.prev=7,console.log("round trip",R),!R){e.next=18;break}return e.next=12,W({origin:c.PlaceId,destination:d.PlaceId,destinationCountryCode:null===d||void 0===d?void 0:d.CountryId.substring(0,2),startDate:v.toISOString().slice(0,10),returnDate:P.toISOString().slice(0,10)});case 12:n=e.sent,console.log("quotes",n),t(n.data),T(!1),e.next=23;break;case 18:return e.next=20,W({origin:c.PlaceId,destination:d.PlaceId,destinationCountryCode:null===c||void 0===c||null===(a=c.countryId)||void 0===a?void 0:a.substring(0,2),startDate:v.toISOString().slice(0,10)});case 20:n=e.sent,t(n.data),T(!1);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(7),console.log("Get quotes failed: ",e.t0);case 28:case"end":return e.stop()}}),e,null,[[7,25]])})))()}},M?r.a.createElement(I.a,null):r.a.createElement(S.a,{name:"search",mr:"4px"}))))))},z=n(207),F=n(93),B=n(212);var M=function(e){var t=e.quotes,n=t?t.Currencies[0]:"";return t.Quotes&&t.Quotes.map((function(e){var a="";e.OutboundLeg.CarrierIds.forEach((function(e,n){var r=t.Carriers.find((function(t){return t.CarrierId===e}));r&&(a+=n>0?" + ":"",a+=r.Name)}));var o=t.Places.find((function(t){return t.PlaceId===e.OutboundLeg.OriginId})),c=t.Places.find((function(t){return t.PlaceId===e.OutboundLeg.DestinationId}));console.log("origin",o),console.log("destination",c);var l=new Date(e.OutboundLeg.DepartureDate).toDateString();return console.log("departureTime",l),r.a.createElement(F.a,{flexDirection:"row",borderWidth:"1px",rounded:"4px",p:"12px",justifyContent:"center",align:"center",textAlign:"center",shadow:"md",key:e.QuoteId},r.a.createElement(u.a,{flex:"1"},a),o&&r.a.createElement(u.a,{flex:"1"},r.a.createElement(B.a,{label:o.Name},r.a.createElement(y.a,null,o.IataCode)),r.a.createElement(y.a,null,l)),r.a.createElement(u.a,{flex:"1"},"---"),r.a.createElement(u.a,{flex:"1"},c&&r.a.createElement(B.a,{label:c.Name},r.a.createElement(y.a,null,c.IataCode))),r.a.createElement(u.a,{flex:"1"},r.a.createElement(y.a,null,n&&n.SymbolOnLeft&&n.Symbol,e.MinPrice,n&&!n.SymbolOnLeft&&n.Symbol)))}))};var T=function(e){var t=e.title,n=e.buttonLabel,o=e.quote,c=Object(a.useState)(!1),i=Object(l.a)(c,2),u=i[0],s=i[1];return r.a.createElement(p.a,{mt:8},r.a.createElement(y.a,{fontSize:"24px",justifyContent:"center",d:"flex"},t),r.a.createElement(z.a,{mb:4,isOpen:u,startingHeight:210},r.a.createElement(M,{quotes:o})),r.a.createElement(b.a,{variantColor:"primary",onClick:function(){return s(!u)}},n))};var U=function(e){var t=e.quotes;return r.a.createElement(T,{title:"Flights",buttonLabel:"Click to see the more flights",quote:t})};var _=function(e){var t=e.quotes,n=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{fontSize:"24px",justifyContent:"center",d:"flex",mt:"2em",bg:"teal.50",p:"1em",rounded:"2",border:"1px"},"Check out alternative destinations in neighbouring countries that have fewer Covid cases per one million population."),t&&t.map((function(e,t){var n=e.Places.find((function(t){return t.PlaceId===e.Quotes[0].OutboundLeg.DestinationId}));return r.a.createElement(T,{key:t,title:n?n.Name+" ("+n.IataCode+"), "+n.CountryName:"",buttonLabel:" Click to see more ".concat(n.Name," flights"),quote:e})})),!t&&r.a.createElement(y.a,{fontSize:"24px",justifyContent:"center",d:"flex",mt:"2em",bg:"pink"},n))},G=n(37),J=n(201),H=Object(G.a)(Object(G.a)({},J.a),{},{fonts:Object(G.a)(Object(G.a)({},J.a.fonts),{},{heading:'"Inter", sans-serif',body:'"Inter", sans-serif'}),colors:Object(G.a)(Object(G.a)({},J.a.colors),{},{primary:{500:"#0d6ffb",800:"#153e75",700:"#2a69ac"}}),fieldBorderWidth:{thin:"1px",bold:"5px"}});var V=function(e){var t=e.children,n=Object(a.useState)(null),o=Object(l.a)(n,2),c=o[0],d=o[1];return Object(a.useEffect)((function(){console.log("Got quotes fro mthe api",c)}),[c]),r.a.createElement(m.a,{theme:H},r.a.createElement(i.a,null),t,r.a.createElement(u.a,{className:f.a.container},r.a.createElement(v,null),r.a.createElement(R,{setQuotes:function(e){return d(e)}}),c&&c.error&&r.a.createElement(s.a,{status:"error",my:"1em"},r.a.createElement(s.b,null),c.error),c&&c.quotes&&r.a.createElement(U,{quotes:null===c||void 0===c?void 0:c.quotes}),c&&c.alternativeQuotes.length>0&&r.a.createElement(_,{quotes:null===c||void 0===c?void 0:c.alternativeQuotes})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(31),K=function(){return r.a.createElement($.a,null,r.a.createElement(V,null))};c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,n){e.exports={container:"App_container__2eP8i"}}},[[101,1,2]]]);
//# sourceMappingURL=main.bea90e8e.chunk.js.map